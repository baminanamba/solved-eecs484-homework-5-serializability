Download Link: https://assignmentchef.com/product/solved-eecs484-homework-5-serializability
<br>
Question 1

Consider the following (incomplete) schedule involving transactions T1, T2, T3, and T4.

<em>Your answers should consider only what is contained in the schedule snapshot below (i.e., do not worry about what may happen afterward).</em>

<table width="362">

 <tbody>

  <tr>

   <td width="84"><strong>T1 </strong></td>

   <td width="86"><strong>T2 </strong></td>

   <td width="93"><strong>T3 </strong></td>

   <td width="99"><strong>T4</strong></td>

  </tr>

  <tr>

   <td width="84"> </td>

   <td width="86"> </td>

   <td width="93">R(Z)</td>

   <td width="99"> </td>

  </tr>

  <tr>

   <td width="84"> </td>

   <td width="86"> </td>

   <td width="93">W(Z)</td>

   <td width="99"> </td>

  </tr>

  <tr>

   <td width="84"> </td>

   <td width="86">R(X)</td>

   <td width="93"> </td>

   <td width="99"> </td>

  </tr>

  <tr>

   <td width="84"> </td>

   <td width="86">W(X)</td>

   <td width="93"> </td>

   <td width="99"> </td>

  </tr>

  <tr>

   <td width="84"> </td>

   <td width="86">R(Y)</td>

   <td width="93"> </td>

   <td width="99"> </td>

  </tr>

  <tr>

   <td width="84">R(X)</td>

   <td width="86"> </td>

   <td width="93"> </td>

   <td width="99"> </td>

  </tr>

  <tr>

   <td width="84"> </td>

   <td width="86"> </td>

   <td width="93"> </td>

   <td width="99">R(Y)</td>

  </tr>

  <tr>

   <td width="84"> </td>

   <td width="86"> </td>

   <td width="93"> </td>

   <td width="99">COMMIT</td>

  </tr>

  <tr>

   <td width="84">COMMIT</td>

   <td width="86"> </td>

   <td width="93"> </td>

   <td width="99"> </td>

  </tr>

  <tr>

   <td width="84"> </td>

   <td width="86">COMMIT</td>

   <td width="93"> </td>

   <td width="99"> </td>

  </tr>

 </tbody>

</table>

<strong> </strong>

<ul>

 <li> Is this schedule recoverable? Explain.​</li>

 <li>Does this schedule avoid cascading aborts? Explain.​</li>

 <li>Could it be generated by non-strict 2PL? Explain.​</li>

 <li>Could it be generated by strict 2PL? Explain.​</li>

</ul>

<h1>Question 2</h1>

Determine if the following schedules are: conflict serializable, and/or serializable. If it is, provide a possible equivalent serial schedule.

<strong>Schedule A</strong>

<table width="474">

 <tbody>

  <tr>

   <td width="158"><strong>T1 </strong></td>

   <td width="158"><strong>T2 </strong></td>

   <td width="158"><strong>T3 </strong></td>

  </tr>

  <tr>

   <td width="158">R(A)</td>

   <td width="158"> </td>

   <td width="158"> </td>

  </tr>

  <tr>

   <td width="158"> </td>

   <td width="158">W(A)COMMIT</td>

   <td width="158"> </td>

  </tr>

  <tr>

   <td width="158"> </td>

   <td width="158"> </td>

   <td width="158">R(A)</td>

  </tr>

  <tr>

   <td width="158"> </td>

   <td width="158"> </td>

   <td width="158">W(A)COMMIT</td>

  </tr>

  <tr>

   <td width="158">W(A)COMMIT</td>

   <td width="158"> </td>

   <td width="158"> </td>

  </tr>

 </tbody>

</table>




<strong>Schedule B </strong>

<table width="468">

 <tbody>

  <tr>

   <td width="156"><strong>T1 </strong></td>

   <td width="156"><strong>T2 </strong></td>

   <td width="156"><strong>T3 </strong></td>

  </tr>

  <tr>

   <td width="156">R(A)</td>

   <td width="156"> </td>

   <td width="156"> </td>

  </tr>

  <tr>

   <td width="156"> </td>

   <td width="156"> </td>

   <td width="156">R(B) R(A)</td>

  </tr>

  <tr>

   <td width="156"> </td>

   <td width="156">W(A)</td>

   <td width="156"> </td>

  </tr>

  <tr>

   <td width="156">R(B)</td>

   <td width="156"> </td>

   <td width="156"> </td>

  </tr>

  <tr>

   <td width="156"> </td>

   <td width="156">W(B)COMMIT</td>

   <td width="156"> </td>

  </tr>

  <tr>

   <td width="156">W(B)COMMIT</td>

   <td width="156"> </td>

   <td width="156"> </td>

  </tr>

  <tr>

   <td width="156"> </td>

   <td width="156"> </td>

   <td width="156">COMMIT</td>

  </tr>

 </tbody>

</table>







<strong>Schedule C </strong>

<table width="468">

 <tbody>

  <tr>

   <td width="156"><strong>T1 </strong></td>

   <td width="156"><strong>T2 </strong></td>

   <td width="156"><strong>T3 </strong></td>

  </tr>

  <tr>

   <td width="156"> </td>

   <td width="156"> </td>

   <td width="156">R(A)</td>

  </tr>

  <tr>

   <td width="156">R(B)W(B)COMMIT</td>

   <td width="156"> </td>

   <td width="156"> </td>

  </tr>

  <tr>

   <td width="156"> </td>

   <td width="156"> </td>

   <td width="156">W(B)</td>

  </tr>

  <tr>

   <td width="156"> </td>

   <td width="156">R(B) W(A)</td>

   <td width="156"> </td>

  </tr>

  <tr>

   <td width="156"> </td>

   <td width="156"> </td>

   <td width="156">W(A)COMMIT</td>

  </tr>

  <tr>

   <td width="156"> </td>

   <td width="156">ABORT</td>

   <td width="156"> </td>

  </tr>

 </tbody>

</table>




<strong>Schedule D </strong>

<table width="468">

 <tbody>

  <tr>

   <td width="117"><strong>T1 </strong></td>

   <td width="117"><strong>T2 </strong></td>

   <td width="117"><strong>T3 </strong></td>

   <td width="117"><strong>T4 </strong></td>

  </tr>

  <tr>

   <td width="117"> </td>

   <td width="117"> </td>

   <td width="117"> </td>

   <td width="117">R(A)</td>

  </tr>

  <tr>

   <td width="117">R(B) R(D)</td>

   <td width="117"> </td>

   <td width="117"> </td>

   <td width="117"> </td>

  </tr>

  <tr>

   <td width="117"> </td>

   <td width="117"> </td>

   <td width="117"> </td>

   <td width="117">W(B)</td>

  </tr>

  <tr>

   <td width="117"> </td>

   <td width="117"> </td>

   <td width="117">R(B) W(C)</td>

   <td width="117"> </td>

  </tr>

  <tr>

   <td width="117">R(C)W(B)COMMIT</td>

   <td width="117"> </td>

   <td width="117"> </td>

   <td width="117"> </td>

  </tr>

  <tr>

   <td width="117"> </td>

   <td width="117">R(C)W(B)COMMIT</td>

   <td width="117"> </td>

   <td width="117"> </td>

  </tr>

  <tr>

   <td width="117"> </td>

   <td width="117"> </td>

   <td width="117">COMMIT</td>

   <td width="117"> </td>

  </tr>

  <tr>

   <td width="117"> </td>

   <td width="117"> </td>

   <td width="117"> </td>

   <td width="117">R(C)W(C)W(B)COMMIT</td>

  </tr>

 </tbody>

</table>




<h1>Question 3</h1>

Determine if the <strong>schedules B, C, D in Question 2 will deadlock</strong>​    if ​        <strong>2</strong>​ <strong>PL</strong> is used, and​     <strong>state which transactions deadlock</strong> if any.​

Assume that lock requests are filled in the order they arrive in the schedule. If a transaction has a request in queue, it will not ask for other locks.

A shared lock is forced into the queue if there is an exclusive lock request on the same object and is also in queue. This is to prevent starvation.

Furthermore, a lock upgrade request (read lock to write lock) is granted immediately if the requesting transaction is the only holder of the shared lock on the object. Otherwise, the requester must wait until all other shared locks are released.

Part 2: ACID and ARIES Protocol

Question 4 (15 points)

Consider the following example of operations on a DBMS:

<ol>

 <li>Transaction 1 modifies Page 1 2. Transaction 1 modifies Page 3</li>

 <li>Transaction 2 modifies Page 2</li>

 <li>Crash!!!!</li>

</ol>

Assume that:

<ul>

 <li>The memory can only accommodate 2 pages</li>

 <li>Avoid writing pages back to disk if not necessary ( do not force )</li>

 <li>No logging or any other kind of book keeping technique is used here</li>

</ul>




<ul>

 <li><strong>[3 points] </strong>At timestamp 3, What does the DBMS have to do to make sure there​ is space to modify Page 2?</li>

 <li><strong>[4 points] </strong>After timestamp 4, the DBMS came back without running any​ recovery protocol. Which property in ACID does it violates now? Explain it in 1~2 sentences.</li>

</ul>




Now consider another scenario:

<ol>

 <li>Transaction 1 modifies Page 1</li>

 <li>Transaction 1 modifies Page 3</li>

 <li>Transaction 1 commits</li>

 <li>Transaction 2 modifies Page 2</li>

 <li>Crash!!!!</li>

</ol>

Again, assume that:

<ul>

 <li>The memory can accommodate 4 pages</li>

 <li>Avoid writing pages back to disk if not necessary ( do not force )</li>

 <li>No logging or any other kind of book keeping technique is used here</li>

</ul>




<ul>

 <li><strong>[4 points] </strong>After timestamp 5., the DBMS came back without running any​ recovery protocol. Which property in ACID does it violates now? Explain it in 1~2 sentences.</li>

 <li><strong>[4 points] </strong>How can we restore this property without using logging? Is there any​ tradeoff?</li>

</ul>




<h1>Question 5 (19 points)</h1>

<strong> </strong>

Consider the following log file, which was found on disk, and the ARIES recovery protocol:




<table width="376">

 <tbody>

  <tr>

   <td width="63">LSN</td>

   <td width="313">LOG</td>

  </tr>

  <tr>

   <td width="63">1</td>

   <td width="313">T1 writes to P1</td>

  </tr>

  <tr>

   <td width="63">2</td>

   <td width="313">T2 writes to P2</td>

  </tr>

  <tr>

   <td width="63">3</td>

   <td width="313">T3 writes to P3</td>

  </tr>

  <tr>

   <td width="63">4</td>

   <td width="313">T1 writes to P1</td>

  </tr>

  <tr>

   <td width="63">5</td>

   <td width="313">T2 writes to P2</td>

  </tr>

  <tr>

   <td width="63">6</td>

   <td width="313">T1 commit</td>

  </tr>

  <tr>

   <td width="63">7</td>

   <td width="313">T1 end</td>

  </tr>

  <tr>

   <td width="63">8</td>

   <td width="313">begin checkpoint</td>

  </tr>

  <tr>

   <td width="63">9</td>

   <td width="313">end checkpoint (along with the dirty page table and transaction table)</td>

  </tr>

  <tr>

   <td width="63">10</td>

   <td width="313">T3 writes to P1</td>

  </tr>

  <tr>

   <td width="63">11</td>

   <td width="313">T3 commit</td>

  </tr>

  <tr>

   <td width="63">12</td>

   <td width="313">T3 end</td>

  </tr>

  <tr>

   <td width="63">13</td>

   <td width="313">T2 writes to P3</td>

  </tr>

  <tr>

   <td width="63">14</td>

   <td width="313">CRASH</td>

  </tr>

 </tbody>

</table>




<ul>

 <li> Describe the dirty page table at the end of the ANALYSIS phase of recovery. For example:</li>

</ul>

<table width="228">

 <tbody>

  <tr>

   <td width="117"><strong>Page ID </strong></td>

   <td width="111"><strong>recLSN </strong></td>

  </tr>

  <tr>

   <td width="117">P500</td>

   <td width="111">7</td>

  </tr>

  <tr>

   <td width="117">P605</td>

   <td width="111">9</td>

  </tr>

 </tbody>

</table>




<ul>

 <li>Describe​ the transaction table at the end of the ANALYSIS phase of recovery. For example:</li>

</ul>

<table width="339">

 <tbody>

  <tr>

   <td width="117"><strong>Txid </strong></td>

   <td width="111"><strong>lastLSN </strong></td>

   <td width="111"><strong>Satus </strong></td>

  </tr>

  <tr>

   <td width="117">T1000</td>

   <td width="111">4</td>

   <td width="111">U</td>

  </tr>

  <tr>

   <td width="117">T2000</td>

   <td width="111">3</td>

   <td width="111">U</td>

  </tr>

 </tbody>

</table>




<ul>

 <li><strong> </strong>Which​ transactions are “loser” transactions, whose result does not persist?</li>

 <li>Are​ there any new compensation log records (CLRs) written during the REDO phase of recovery? Explain.</li>

 <li>How many CLR records are added in the UNDO phase? Briefly describe them.</li>

</ul>


